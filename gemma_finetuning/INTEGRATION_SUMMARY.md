# ๐ ะกะฒะพะดะบะฐ ะธะฝัะตะณัะฐัะธะธ OperCode + NER

## โ ะงัะพ ะฑัะปะพ ัะดะตะปะฐะฝะพ:

### 1. ะกะพะทะดะฐะฝ ะพะฑัะตะดะธะฝะตะฝะฝัะน API ัะตัะฒะตั
**ะคะฐะนะป:** `unified_api_server.py`

ะะฑัะตะดะธะฝัะตั ะดะฒะฐ ััะฝะบัะธะพะฝะฐะปะฐ:
- **OperCode Prediction** (Gemma 2 9B) - ะพะฟัะตะดะตะปะตะฝะธะต ะบะพะดะพะฒ ะฑะฐะฝะบะพะฒัะบะธั ะพะฟะตัะฐัะธะน
- **Name Extraction** (Qwen 2.5 14B) - ะธะทะฒะปะตัะตะฝะธะต ะธะผะตะฝ ะธ ัะฐะผะธะปะธะน ะธะท ัะตะบััะฐ

### 2. ะกะพะทะดะฐะฝ ัะพะฒัะตะผะตะฝะฝัะน ะฒะตะฑ-ะธะฝัะตััะตะนั

**3 ะฒะบะปะฐะดะบะธ:**
- ๐ณ **OperCode Predictor** - ะพะฟัะตะดะตะปะตะฝะธะต ะบะพะดะฐ ะพะฟะตัะฐัะธะธ
- ๐ค **Name Extractor** - ะธะทะฒะปะตัะตะฝะธะต ะธะผะตะฝ
- ๐ **Unified Analysis** - ะบะพะผะฟะปะตะบัะฝัะน ะฐะฝะฐะปะธะท

**ะัะพะฑะตะฝะฝะพััะธ:**
- ะัะฐัะธะฒัะน ะณัะฐะดะธะตะฝัะฝัะน ะดะธะทะฐะนะฝ
- ะะดะฐะฟัะธะฒะฝัะน ะธะฝัะตััะตะนั
- ะัะธะผะตัั ะดะปั ัะตััะธัะพะฒะฐะฝะธั
- ะัััััะต ัะตะทัะปััะฐัั

### 3. REST API endpoints

```
POST /predict/opercode   - ะัะตะดัะบะฐะทะฐะฝะธะต ะบะพะดะฐ ะพะฟะตัะฐัะธะธ
POST /predict/ner        - ะะทะฒะปะตัะตะฝะธะต ะธะผะตะฝ
POST /predict/unified    - ะะพะผะฟะปะตะบัะฝัะน ะฐะฝะฐะปะธะท
GET  /health            - ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
GET  /codes             - ะกะฟะธัะพะบ ะฒัะตั ะบะพะดะพะฒ
GET  /docs              - Swagger ะดะพะบัะผะตะฝัะฐัะธั
```

### 4. ะกะบัะธะฟัั ะทะฐะฟััะบะฐ

- `start_unified_api.sh` - ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะทะฐะฟััะบ ั ะฟัะพะฒะตัะบะฐะผะธ
- ะัะพะฒะตััะตั ะฝะฐะปะธัะธะต Ollama
- ะัะพะฒะตััะตั ะฝะฐะปะธัะธะต ะผะพะดะตะปะธ qwen2.5:14b
- ะะฐะฟััะบะฐะตั Ollama ะตัะปะธ ะฝัะถะฝะพ

### 5. ะะพะบัะผะตะฝัะฐัะธั

- `UNIFIED_API_README.md` - ะฟะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
- `QUICKSTART_UNIFIED.md` - ะฑัััััะน ััะฐัั
- `INTEGRATION_SUMMARY.md` - ััะฐ ัะฒะพะดะบะฐ

## ๐ฏ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Unified Web Interface (FastAPI)         โ
โ              http://localhost:8000              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                        โ
        โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโ
        โ                               โ
        โผ                               โผ
โโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโ
โ  Gemma 2 9B      โ          โ  Qwen 2.5 14B    โ
โ  + QLoRA         โ          โ  via Ollama      โ
โ  (OperCode)      โ          โ  (NER)           โ
โโโโโโโโโโโโโโโโโโโโ          โโโโโโโโโโโโโโโโโโโโ
        โ                               โ
        โผ                               โผ
   ะะพะด ะพะฟะตัะฐัะธะธ                  ะะผั + ะคะฐะผะธะปะธั
   + ะะฟะธัะฐะฝะธะต                    + ะััะฐัะพะบ ัะตะบััะฐ
```

## ๐ ะกัััะบัััะฐ ัะฐะนะปะพะฒ:

```
gemma_finetuning/
โโโ unified_api_server.py          โ ะะพะฒัะน ะพะฑัะตะดะธะฝะตะฝะฝัะน API
โโโ start_unified_api.sh           โ ะกะบัะธะฟั ะทะฐะฟััะบะฐ
โโโ UNIFIED_API_README.md          โ ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ QUICKSTART_UNIFIED.md          โ ะัััััะน ััะฐัั
โโโ INTEGRATION_SUMMARY.md         โ ะญัะฐ ัะฒะพะดะบะฐ
โ
โโโ api_server.py                  โ ะกัะฐััะน API (ัะพะปัะบะพ OperCode)
โโโ start_api.sh                   โ ะกัะฐััะน ัะบัะธะฟั
โ
โโโ outputs/
โ   โโโ gemma_qlora_*/
โ       โโโ checkpoint-3000/       โ ะัะฟะพะปัะทัะตะผัะน checkpoint
โ
โโโ ../NER/
    โโโ ner_extraction_ollama.py   โ NER ะผะพะดัะปั (ะธัะฟะพะปัะทัะตััั)
    โโโ ner_web_interface.py       โ ะกัะฐััะน Streamlit ะธะฝัะตััะตะนั
```

## ๐ Workflow ะธัะฟะพะปัะทะพะฒะฐะฝะธั:

### ะะฐัะธะฐะฝั 1: ะขะพะปัะบะพ OperCode
```
ะขะตะบัั โ Gemma โ ะะพะด + ะะฟะธัะฐะฝะธะต
```

### ะะฐัะธะฐะฝั 2: ะขะพะปัะบะพ NER
```
ะขะตะบัั โ Qwen โ ะะผั + ะคะฐะผะธะปะธั
```

### ะะฐัะธะฐะฝั 3: Unified (ะพะฑะฐ)
```
ะขะตะบัั โ Gemma โ ะะพะด + ะะฟะธัะฐะฝะธะต
     โ Qwen  โ ะะผั + ะคะฐะผะธะปะธั
```

## ๐ป ะขัะตะฑะพะฒะฐะฝะธั:

### Hardware:
- **GPU:** 8+ GB VRAM (ะดะปั Gemma)
- **RAM:** 16+ GB (ะดะปั ะพะฑะตะธั ะผะพะดะตะปะตะน)
- **ะะธัะบ:** 30+ GB (ะผะพะดะตะปะธ + checkpoints)

### Software:
- Python 3.10+
- PyTorch ั CUDA
- Ollama
- FastAPI, uvicorn

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:

| ะคัะฝะบัะธั | ะะตัะฒัะน ะทะฐะฟัะพั | ะะพัะปะตะดัััะธะต | VRAM/RAM |
|---------|---------------|-------------|----------|
| OperCode | 10-15 ัะตะบ | 3-5 ัะตะบ | 5-6 GB VRAM |
| NER | 5-10 ัะตะบ | 5-10 ัะตะบ | 8-10 GB RAM |
| Unified | 15-25 ัะตะบ | 8-15 ัะตะบ | ะะฑะฐ |

## ๐จ ะัะพะฑะตะฝะฝะพััะธ ะธะฝัะตััะตะนัะฐ:

### ะะธะทะฐะนะฝ:
- ะัะฐะดะธะตะฝัะฝัะน ัะธะพะปะตัะพะฒัะน ัะพะฝ
- ะะตะปัะต ะบะฐััะพัะบะธ ั ัะตะฝัะผะธ
- ะฆะฒะตัะฝัะต ะฑะตะนะดะถะธ ะดะปั ัะตะทัะปััะฐัะพะฒ
- ะะดะฐะฟัะธะฒะฝะฐั ะฒะตัััะบะฐ

### UX:
- ะะบะปะฐะดะบะธ ะดะปั ัะฐะทะฝัั ััะฝะบัะธะน
- ะัะธะผะตัั ะดะปั ะฑััััะพะณะพ ัะตััะธัะพะฒะฐะฝะธั
- ะงะตะบะฑะพะบัั ะดะปั ะฒัะฑะพัะฐ ััะฝะบัะธะน (Unified)
- Ctrl+Enter ะดะปั ะพัะฟัะฐะฒะบะธ
- ะะฝะดะธะบะฐัะพัั ะทะฐะณััะทะบะธ

### ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั:
- ะะดะธะฝะพัะฝัะน ะฐะฝะฐะปะธะท
- ะัะธะผะตัั ัะตะบััะพะฒ
- ะัะพะฑัะฐะถะตะฝะธะต ัะตะทัะปััะฐัะพะฒ
- ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

## ๐ง API Endpoints ะฟะพะดัะพะฑะฝะพ:

### 1. POST /predict/opercode
**ะัะพะด:**
```json
{
  "payment_comment": "PURCHASE OF GOODS",
  "temperature": 0.1,
  "max_tokens": 10
}
```

**ะััะพะด:**
```json
{
  "input_text": "PURCHASE OF GOODS",
  "predicted_code": "10151",
  "code_description": "ะะฐัะตะณะพัะธั ะฟัะพะดัะบัะธั",
  "confidence": "ะััะพะบะฐั",
  "checkpoint": "checkpoint-3000"
}
```

### 2. POST /predict/ner
**ะัะพะด:**
```json
{
  "text": "ะะตะฝั ะทะพะฒัั ะะฒะฐะฝ ะะตััะพะฒ"
}
```

**ะััะพะด:**
```json
{
  "first_name": "ะะฒะฐะฝ",
  "last_name": "ะะตััะพะฒ",
  "full_name": "ะะฒะฐะฝ ะะตััะพะฒ",
  "remaining_text": ""
}
```

### 3. POST /predict/unified
**ะัะพะด:**
```json
{
  "text": "ะะฒะฐะฝ ะะตััะพะฒ ัะพะฒะตััะธะป ะฟะตัะตะฒะพะด ััะตะดััะฒ",
  "extract_opercode": true,
  "extract_names": true
}
```

**ะััะพะด:**
```json
{
  "input_text": "ะะฒะฐะฝ ะะตััะพะฒ ัะพะฒะตััะธะป ะฟะตัะตะฒะพะด ััะตะดััะฒ",
  "opercode": {
    "predicted_code": "40101",
    "code_description": "ะะตัะตะฒะพะดั ะฝะฐ ัะฒะพะน ััะตั",
    "confidence": "ะััะพะบะฐั"
  },
  "ner": {
    "first_name": "ะะฒะฐะฝ",
    "last_name": "ะะตััะพะฒ",
    "full_name": "ะะฒะฐะฝ ะะตััะพะฒ",
    "remaining_text": "ัะพะฒะตััะธะป ะฟะตัะตะฒะพะด ััะตะดััะฒ"
  }
}
```

## ๐ ะะฐะบ ะทะฐะฟัััะธัั:

### ะจะฐะณ 1: ะฃััะฐะฝะพะฒะธัะต Ollama
```bash
curl -fsSL https://ollama.com/install.sh | sh
```

### ะจะฐะณ 2: ะะฐะณััะทะธัะต ะผะพะดะตะปั NER
```bash
ollama pull qwen2.5:14b
```

### ะจะฐะณ 3: ะะฐะฟัััะธัะต Ollama (ะฒ ะพัะดะตะปัะฝะพะผ ัะตัะผะธะฝะฐะปะต)
```bash
ollama serve
```

### ะจะฐะณ 4: ะะฐะฟัััะธัะต Unified API
```bash
cd /home/user/Desktop/RPA/gemma_finetuning
./start_unified_api.sh
```

### ะจะฐะณ 5: ะัะบัะพะนัะต ะฑัะฐัะทะตั
```
http://localhost:8000
```

## ๐ฏ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั:

### ะัะธะผะตั 1: ะะฝะฐะปะธะท ะฟะปะฐัะตะถะฐ
```
ะะฒะพะด: "PURCHASE OF GOODS FROM COMPANY ABC"
ะะตะทัะปััะฐั: ะะพะด 10151 - ะะฐัะตะณะพัะธั ะฟัะพะดัะบัะธั
```

### ะัะธะผะตั 2: ะะทะฒะปะตัะตะฝะธะต ะธะผะตะฝะธ
```
ะะฒะพะด: "ะะพะบัะผะตะฝั ะฟะพะดะฟะธัะฐะฝ ะะฝะฝะพะน ะกะธะดะพัะพะฒะพะน"
ะะตะทัะปััะฐั: ะะฝะฝะฐ ะกะธะดะพัะพะฒะฐ
```

### ะัะธะผะตั 3: ะะพะผะฟะปะตะบัะฝัะน ะฐะฝะฐะปะธะท
```
ะะฒะพะด: "ะะฒะฐะฝ ะะตััะพะฒ ัะพะฒะตััะธะป ะฟะตัะตะฒะพะด ััะตะดััะฒ ะฝะฐ ัะฒะพะน ััะตั"
ะะตะทัะปััะฐั:
  - ะะพะด: 40101 (ะะตัะตะฒะพะดั ะฝะฐ ัะฒะพะน ััะตั)
  - ะะผั: ะะฒะฐะฝ ะะตััะพะฒ
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั:

- ะัะต ัะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ
- ะะฐะฝะฝัะต ะฝะต ะพัะฟัะฐะฒะปััััั ะฒ ะธะฝัะตัะฝะตั
- ะะต ะฝัะถะฝั API ะบะปััะธ
- ะะพะปะฝัะน ะบะพะฝััะพะปั ะฝะฐะด ะดะฐะฝะฝัะผะธ

## ๐ ะะพะทะผะพะถะฝะพััะธ ัะฐััะธัะตะฝะธั:

1. **Batch processing** - ะพะฑัะฐะฑะพัะบะฐ ะผะฝะพะถะตััะฒะฐ ัะตะบััะพะฒ
2. **File upload** - ะทะฐะณััะทะบะฐ CSV/Excel ัะฐะนะปะพะฒ
3. **Authentication** - ะดะพะฑะฐะฒะปะตะฝะธะต ะฐััะตะฝัะธัะธะบะฐัะธะธ
4. **Rate limiting** - ะพะณัะฐะฝะธัะตะฝะธะต ะทะฐะฟัะพัะพะฒ
5. **Logging** - ะดะตัะฐะปัะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต
6. **Metrics** - ะผะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
7. **Caching** - ะบััะธัะพะฒะฐะฝะธะต ัะตะทัะปััะฐัะพะฒ

## ๐ ะัะพะณ:

ะกะพะทะดะฐะฝ ะฟะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝัะน unified API ัะตัะฒะตั, ะบะพัะพััะน:
- โ ะะฑัะตะดะธะฝัะตั OperCode ะธ NER ะฒ ะพะดะฝะพะผ ะธะฝัะตััะตะนัะต
- โ ะะผะตะตั ะบัะฐัะธะฒัะน ัะพะฒัะตะผะตะฝะฝัะน ะฒะตะฑ-ะธะฝัะตััะตะนั
- โ ะัะตะดะพััะฐะฒะปัะตั REST API ะดะปั ะฟัะพะณัะฐะผะผะฝะพะณะพ ะดะพัััะฟะฐ
- โ ะะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ ะฑะตะท ะฒะฝะตัะฝะธั ะทะฐะฒะธัะธะผะพััะตะน
- โ ะะตะณะบะพ ะทะฐะฟััะบะฐะตััั ะธ ะธัะฟะพะปัะทัะตั
- โ ะะพะปะฝะพัััั ะดะพะบัะผะตะฝัะธัะพะฒะฐะฝ

**ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!** ๐




